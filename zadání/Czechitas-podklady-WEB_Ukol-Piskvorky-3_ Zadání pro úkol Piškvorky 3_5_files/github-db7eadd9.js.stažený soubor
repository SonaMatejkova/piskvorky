System.register(["./vendor.js","./frameworks.js"],(function(){"use strict";var t,e,o,s,n,a,c,r,i,d,l,u,m,p,f;return{setters:[function(r){t=r.r,e=r.q,o=r.l,s=r.n,n=r.a,a=r.o,c=r.m},function(t){r=t.I,i=t.U,d=t.o,l=t.a,u=t.R,m=t._,p=t.n,f=t.V}],execute:function(){async function g(t,o,s){const n=e(document,t),a=e(document,o);function c(t){a.hidden=t,a.open=!1,n.hidden=!t}let d;c(!0);try{d=await s.json()}catch(u){return c(!1),void r()}const l=d.json;try{await i(l.job_url)}catch(u){return c(!1),void r()}c(!1),window.location=l.export_url}t(".js-audit-log-export-form",(async function(t,e){await g(".js-audit-log-exporting",".js-audit-log-export-menu",e)})),t(".js-audit-log-git-event-export-form",(async function(t,e){await g(".js-audit-log-git-event-exporting",".js-audit-log-git-event-export-menu",e)})),t(".js-toggler-container .js-set-approval-state",(async function(t,e){const s=o(t,".js-toggler-container");s.classList.add("loading");const n=await e.json();"approved"===n.json.approval_state?s.classList.add("on"):"denied"===n.json.approval_state&&(s.classList.add("revoked"),s.classList.remove("on")),s.classList.remove("loading")})),t(".js-request-access-approval-form",(async function(t,o){await o.text();const n=s(t,"data-container-id");e(document,`#${n}`).classList.add("on")})),n("details-menu-selected",".js-select-plan-menu",(function(t){const e=t.detail.relatedTarget,o=document.querySelectorAll(".js-plan-card-section");for(const c of o)c instanceof HTMLElement&&(c.hidden=!0);const s=t.currentTarget.querySelectorAll("[role^=menuitem]"),n=Array.from(s).indexOf(e),a=Array.from(o)[n];a instanceof HTMLElement&&(a.hidden=!1)}),{capture:!0}),a(".js-suggested-usernames-container",(function(t){const e=c(t,".js-suggested-username",HTMLInputElement),o=document.querySelector(".js-signup-form");if(o&&0!==e.length)for(const s of e)o.appendChild(s)})),d(".js-email-notice-trigger",(function(t){const e=c(document,".js-email-notice");for(const o of e)o.classList.add("notice-highlight");t.addEventListener("blur",(function(){for(const t of e)t.classList.remove("notice-highlight")}))})),a(".js-plan-choice:checked",{add(t){const e=t.closest(".plan-row");e&&e.classList.add("selected")},remove(t){const e=t.closest(".plan-row");e&&e.classList.remove("selected")}});const h=new WeakMap;function j(t){const s=t.target,n=o(s,"form");if(s.closest("input[type=text]")&&!h.get(n)){const t=e(n,".js-signup-source",HTMLInputElement);let o=t.value;t.hasAttribute("data-ga-label")&&(o=`${o}${t.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Attempt",label:o}),h.set(n,!0)}}function L(){const t=e(document,".js-password-with-confirmation",HTMLInputElement),s=e(document,".js-password-confirm",HTMLInputElement);s.value!==t.value?function(t){const e=o(t,".js-form-group");e.classList.add("errored");const s=t.getAttribute("data-validity-message");if(s){t.setCustomValidity(s);const e=o(t,"form",HTMLFormElement);f(e)}const n=e.querySelector(".error"),a=t.getAttribute("data-error-message");if(!n&&a){const t=document.createElement("dd");t.classList.add("error"),t.innerHTML=a,e.appendChild(t)}}(s):function(t){const e=o(t,".js-form-group");t.setCustomValidity(""),e.classList.remove("errored");const s=o(t,"form",HTMLFormElement);f(s);const n=e.querySelector(".error");n&&e.removeChild(n)}(s)}a(".js-signup-form",{subscribe:t=>l(t,"input",j)}),n("submit",".js-signup-form-submit",(function(t){const o=t.currentTarget,s=e(o,".js-signup-source",HTMLInputElement);let n=s.value;s.hasAttribute("data-ga-label")&&(n=`${n}${s.getAttribute("data-ga-label")}`),u({category:"Sign up",action:"Submit",label:n})})),n("submit",".js-org-survey",(function(t){const e=t.currentTarget,o=c(e,".js-other-text",HTMLInputElement);for(const s of o){const t=m(s,"js-other-hidden-input");t instanceof HTMLInputElement&&(t.checked=s.value.length>0)}})),a(".js-show-next-question-trigger:checked",{constructor:HTMLElement,add(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=m(e,"js-hidden-question");t&&(t.hidden=!1)}},remove(t){const e=t.closest(".js-show-next-question");if(e instanceof HTMLElement){const t=m(e,"js-hidden-question");t&&(t.hidden=!0)}}}),a(".js-octocaptcha-parent",(function(t){const o=e(t,".js-octocaptcha-spinner"),s=e(t,".js-octocaptcha-success"),n=e(t,".js-octocaptcha-token",HTMLInputElement),a=e(t,".js-octocaptcha-form-submit",HTMLButtonElement),c=e(t,".js-octocaptcha-frame-container"),r=e(t,".js-octocaptcha-frame",HTMLIFrameElement),i=n.getAttribute("data-octocaptcha-url"),d=n.getAttribute("data-octocaptcha-timeout"),l=d?parseInt(d):3e4;let m=!1;const p=()=>{m||(m=!0,o.classList.add("d-none"),s.classList.remove("d-none"),g())},f=()=>{if(m)return;const e=document.createElement("input");e.type="hidden",e.id="error_loading_captcha",e.name="error_loading_captcha",e.value="1",t.appendChild(e),n.required=!1,p()},g=()=>{t.checkValidity()&&(a.disabled=!1)};setTimeout(f,l),r.addEventListener("error",f),window.addEventListener("message",t=>{if(t.origin!==i)return;const e=t.data&&t.data.event;var s;"captcha-loaded"===e?m||(m=!0,o.classList.add("d-none"),c.classList.remove("v-hidden","zero-height"),null===(s=r.contentWindow)||void 0===s||s.postMessage({event:"captcha-loaded-ack"},i||"")):"captcha-complete"===e?(n.value=t.data.sessionToken,(()=>{const t=c.getAttribute("data-ga-event-category");t&&u({category:t,action:"success",label:"captcha verified"})})(),g()):"captcha-suppressed"===e&&p()})})),a(".js-survey-answer-choice:checked",{add(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-black-fade","bg-white"),t.classList.add("border-blue","bg-blue-light"))}const o=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);o instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(o.hidden=!1)},remove(t){const e=t.closest(".js-answer");if(e){const t=e.querySelector(".js-answer-choice");t&&(t.classList.remove("border-blue","bg-blue-light"),t.classList.add("border-black-fade","bg-white"))}const o=document.querySelector(`.js-other-input-box[data-other-input-for=${t.getAttribute("data-question-short-text")}]`);o instanceof HTMLElement&&t.classList.contains("js-other-choice")&&(o.hidden=!0)}}),a(".js-allow-multiple:checked",{constructor:HTMLInputElement,add(t){const e=parseInt(t.getAttribute("data-max-choices")||""),s=o(t,".js-question"),n=c(s,".js-allow-multiple",HTMLInputElement);if(n.filter(t=>!0===t.checked).length>=e)for(const o of n)!1===o.checked&&(o.disabled=!0)},remove(t){const e=o(t,".js-question");for(const o of c(e,".js-allow-multiple",HTMLInputElement))o.disabled=!1}}),p("keyup",".js-password-with-confirmation",()=>{""!==e(document,".js-password-confirm",HTMLInputElement).value&&L()}),p("keyup",".js-password-confirm",L)}}}));
//# sourceMappingURL=github-cd252037.js.map
